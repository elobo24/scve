@extends ('backend.layouts.master')

@section('page-header')
  <h1><i class="fa fa-line-chart fa-lg"></i> Histórico de Cambios</h1>
  <ol class="breadcrumb">
    <li><a href="{{url('HistoricoCambios')}}"><i class="fa fa-line-chart"></i> Seguridad</a></li>
    <li><a href="{{url('HistoricoCambios')}}"> Reportes</a></li>
    <li><a href="{{url('HistoricoCambios')}}"> Histórico de Cambios</a></li>
    <li class="active"> Detalle</li>
  </ol>
@stop

@section('content')
 <div class="row">

    <div class="col-md-12">
      <div class="box box-warning">

        <div class="box-header with-border">
          <!--codigo gui MOD-REPO-1.2---->
          <input type="hidden" name="codigo_gui" value="MOD-REPO-1.2.1" id="codigo_gui">
          <h3 class="box-title">Detalle</h3>
          <div class="box-tools pull-right">
            <button type="button" class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-minus"></i>
            </button>
          </div>
        </div><!-- /.box-header -->

        <div class="box-body">
          <table class="table table-bordered table-responsive">
            <thead class="thead-primary">
              <tr>
                  <th>Usuario</td>
                  <th>Fecha</td>
                  <th>IP</td>
                  <th>Acción</td>
                  <th>Ruta</td>
              </tr>
            </thead>
            <tr>
              <td>{{ $log->username }}</td>
              <td>{{ $log->created_at }}</td>
              <td>{{ $log->ip_address }}</td>
              <td>{{ $log->event }}</td>
              <td>{{ $log->url }}</td>
            </tr>
          </table>
          <div class="col-sm-12 table-bordered">
            <h3>Registro anterior</h3>
            @if (!empty(json_decode($log->old_values, true)))
              @foreach (json_decode($log->old_values, true) as $old_key => $old_value)
                <div class="col-sm-6">
                  <div class="col-sm-5 text-right table-bordered"><strong>
                    {{ $old_key }}:
                  </strong></div>
                  <div class="col-sm-7 table-bordered">{{ $old_value != null ? $old_value : 'Vacío' }}</div>
                </div>
              @endforeach
            @else
              <div class="col-sm-6">
                <div class="col-sm-12 table-bordered"><strong>Ninguno</strong></div>
              </div>
            @endif
          </div>
          <div class="col-sm-12 table-bordered">
            <h3>Registro nuevo</h3>
            @if (!empty(json_decode($log->new_values, true)))
              @foreach (json_decode($log->new_values, true) as $new_key => $new_value)
                <div class="col-sm-6">
                  <div class="col-sm-5 text-right table-bordered"><strong>
                    {{ $new_key }}:
                  </strong></div>
                  <div class="col-sm-7 table-bordered">{{ $new_value != null ? $new_value : 'Vacío' }}</div>
                </div>
              @endforeach
            @else
              <div class="col-sm-6">
                <div class="col-sm-12 table-bordered"><strong>Ninguno</strong></div>
              </div>
            @endif
          </div>
        </div>
      </div>
    </div>
  </div>
@stop

@section('after-scripts-end')
@stop
