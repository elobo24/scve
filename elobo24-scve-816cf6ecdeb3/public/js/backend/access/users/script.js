$(function() {
    $(".show-permissions").click(function(e) {
        e.preventDefault();
        var $this = $(this);
        var role = $this.data('role');
        var permissions = $(".permission-list[data-role='"+role+"']");
        var hideText = $this.find('.hide-text');
        var showText = $this.find('.show-text');
        // console.log(permissions); // for debugging

        // show permission list
        permissions.toggleClass('hidden');

        // toggle the text Show/Hide for the link
        hideText.toggleClass('hidden');
        showText.toggleClass('hidden');
    });

    $( "#form-create" ).submit(function( event ) {
      event.preventDefault(event);
      swal({
        title: '¿Está seguro de que quiere agregar el usuario?',
        type: "warning",
        showCancelButton: true,
        cancelButtonText: 'Cancelar',
        confirmButtonColor: "#8CD4F5",
        confirmButtonText: 'Aceptar',
        closeOnConfirm: true
      }, function(confirmed) {
        if (confirmed) {
          $("#form-create").off("submit").submit();
        }
      });
    });

    $( "#form-edit" ).submit(function( event ) {
      event.preventDefault(event);
      swal({
        title: '¿Está seguro de que quiere actualizar el usuario?',
        type: "warning",
        showCancelButton: true,
        cancelButtonText: 'Cancelar',
        confirmButtonText: 'Aceptar',
        closeOnConfirm: true
      }, function(confirmed) {
        if (confirmed) {
          $("#form-edit").off("submit").submit();
        }
      });
    });

    $( "#form-change-password" ).submit(function( event ) {
      event.preventDefault(event);
      swal({
        title: '¿Está seguro de que quiere cambiar la contraseña del usuario?',
        type: "warning",
        showCancelButton: true,
        cancelButtonText: 'Cancelar',
        confirmButtonText: 'Aceptar',
        closeOnConfirm: true
      }, function(confirmed) {
        if (confirmed) {
          $("#form-change-password").off("submit").submit();
        }
      });
    });
});
